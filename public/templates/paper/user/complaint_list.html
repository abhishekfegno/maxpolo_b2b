{% extends 'paper/layout.html' %}
{% load crispy_forms_tags %}
{% block content%}
<div class='row'>
    <div class='col-6'>
        <div class='card'>
            <div class='card-body'>
                <h3>Create Complaint</h3>
                <form method="POST">
                    {% csrf_token %}
                    {{ form | crispy }}
                    <button type='submit'  style="float:right;" class='btn btn-sm btn-success'> Save </button>
                </form>
            </div>
        </div>
    </div>
    <div class='col-12'>
        <div class='card'>
            <div class='card-body'>
                <h3>Complaints List</h3>

                <div class="table-responsive">
                    <table class="table table-hover table-sm">
                        <thead class="">
                        <tr class="">
                            <th scope="col">ID</th>
                            <th scope="col">Description</th>
                            <th scope="col">Status</th>
                            <th scope="col">Created by</th>
                            <!--                    <th scope="col">Contact</th>-->
                            <!--                    <th scope="col">Subscription</th>-->
                            <!--                    <th scope="col">Last View</th>-->
                            <!--                    <th scope="col">Action</th>-->
                        </tr>
                        <!--                <tr>-->
                        <!--                    <td class="text-dark text-sm"><small>#</small></td>-->
                        <!--                    <td class="text-dark text-sm"><small>Name of the {{ title }}</small></td>-->
                        <!--                    <td class="text-dark text-sm"><small>Contact</small></td>-->
                        <!--                    <td class="text-dark text-sm"><small>Subscription</small></td>-->
                        <!--                    <td class="text-dark text-sm"><small>Last View</small></td>-->
                        <!--                    <td class="text-dark text-sm"><small>Hot links for quick actions.</small></td>-->
                        <!--                </tr>-->
                        </thead>
                        <tbody>
                        {% for object in object_list %}
                        <tr>
                            <!--                    <td scope="row"> </td>-->
                            <td>
                                <div class="">{{ forloop.counter }}</div>
                            </td>
                            <td>
                                <div class="">{{ object.description }}</div>
                            </td>
                            <td>
                                <div class="">{{ object.status }}</div>
                            </td>
                            <td>
                                <div class="">{{ object.created_by }}</div>
                            </td>
                            <td>
                                <div class=""><a href="{% url 'complaint-update' pk=object.pk %}" class="btn btn-primary">Edit</a></div>
                            </td>
                            <td>
                                <div class=""><a href="" onclick="swalFunction(this, {{ object.pk }})" class="delBrand btn btn-danger">Delete</a></div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>

                    </table>
                </div>

            </div>
        </div>

    </div>



</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.16/dist/sweetalert2.all.min.js"></script>
<script>
    function swalFunction(element, id){
        console.log(element, id)
    Swal.fire({
          title: 'Are you sure?',
          text: "You won't be able to revert this!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Yes, delete it!'
    }).then((result) => {
        if (result.isConfirmed) {
<!--            $.ajax({-->
<!--                type:"POST",-->
<!--                url:""-->
<!--                -->
<!--            })-->
            Swal.fire(
              'Deleted!',
              'Your file has been deleted.',
              'success'
            )
            }
        });
    } // end of swalFunction()

</script>

{% endblock %}