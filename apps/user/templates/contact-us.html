<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://js.pusher.com/7.1/pusher.min.js"></script>
</head>
<body>

<div class="jumbotron text-center">
    <h1>My First Bootstrap Page</h1>
    <p>Resize this responsive page to see the effect!</p>
</div>

<div class="container">
    <div class="row">
        <div class="col-sm-4">
            <button class="elementor-button-link">Make an Appointment</button>

            <div id="triggered">

            </div>
        </div>
        <div class="col-sm-4">
            <div class="elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-9482703" data-id="9482703" data-element_type="column" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
                <div class="elementor-widget-wrap elementor-element-populated">
                    <div class="elementor-element elementor-element-3d12be1 elementor-widget elementor-widget-heading" data-id="3d12be1" data-element_type="widget" data-widget_type="heading.default">
                        <div class="elementor-widget-container">
                            <style>.elementor-heading-title{padding:0;margin:0;line-height:1}.elementor-widget-heading .elementor-heading-title[class*=elementor-size-]>a{color:inherit;font-size:inherit;line-height:inherit}.elementor-widget-heading .elementor-heading-title.elementor-size-small{font-size:15px}.elementor-widget-heading .elementor-heading-title.elementor-size-medium{font-size:19px}.elementor-widget-heading .elementor-heading-title.elementor-size-large{font-size:29px}.elementor-widget-heading .elementor-heading-title.elementor-size-xl{font-size:39px}.elementor-widget-heading .elementor-heading-title.elementor-size-xxl{font-size:59px}</style>
                        </div>
                    </div>
                    <div class="elementor-element elementor-element-f3d10dc elementor-widget elementor-widget-heading" data-id="f3d10dc" data-element_type="widget" data-widget_type="heading.default">
                        <div class="elementor-widget-container">
                            <h2 class="elementor-heading-title elementor-size-default">Send Us Message</h2>		</div>
                    </div>
                    <div class="elementor-element elementor-element-e3aca20 elementor-widget elementor-widget-text-editor" data-id="e3aca20" data-element_type="widget" data-widget_type="text-editor.default">
                        <div class="elementor-widget-container">
                            <style>.elementor-widget-text-editor.elementor-drop-cap-view-stacked .elementor-drop-cap{background-color:#818a91;color:#fff}.elementor-widget-text-editor.elementor-drop-cap-view-framed .elementor-drop-cap{color:#818a91;border:3px solid;background-color:transparent}.elementor-widget-text-editor:not(.elementor-drop-cap-view-default) .elementor-drop-cap{margin-top:8px}.elementor-widget-text-editor:not(.elementor-drop-cap-view-default) .elementor-drop-cap-letter{width:1em;height:1em}.elementor-widget-text-editor .elementor-drop-cap{float:left;text-align:center;line-height:1;font-size:50px}.elementor-widget-text-editor .elementor-drop-cap-letter{display:inline-block}</style>
                            <p>Just send us your questions or concerns by starting a new case and we will give you the help you need.</p>
                        </div>
                    </div>
                    <div class="elementor-element elementor-element-7f85be7 elementor-widget elementor-widget-shortcode" data-id="7f85be7" data-element_type="widget" data-widget_type="shortcode.default">
                        <div class="elementor-widget-container">
                            <div class="elementor-shortcode">
                                <div role="form" class="wpcf7" id="wpcf7-f44844-p183-o1" lang="en-US" dir="ltr">
                                    <div class="screen-reader-response"><p role="status" aria-live="polite" aria-atomic="true"></p> <ul></ul></div>
                                    <form action="/contact-us/#wpcf7-f44844-p183-o1" method="post" class="wpcf7-form init" novalidate="novalidate" data-status="init">
                                        <p><label> Your name<br>
                                            <span class="wpcf7-form-control-wrap your-name"><input type="text" name="your-name" value="" size="40" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" aria-required="true" aria-invalid="false"></span> </label></p>
                                        <p><label> Your email<br>
                                            <span class="wpcf7-form-control-wrap your-email"><input type="email" name="your-email" value="" size="40" class="wpcf7-form-control wpcf7-text wpcf7-email wpcf7-validates-as-required wpcf7-validates-as-email" aria-required="true" aria-invalid="false"></span> </label></p>
                                        <p><label> Subject<br>
                                            <span class="wpcf7-form-control-wrap your-subject"><input type="text" name="your-subject" value="" size="40" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" aria-required="true" aria-invalid="false"></span> </label></p>
                                        <p><label> Your message (optional)<br>
                                            <span class="wpcf7-form-control-wrap your-message"><textarea name="your-message" cols="40" rows="10" class="wpcf7-form-control wpcf7-textarea" aria-invalid="false"></textarea></span> </label></p>
                                        <p><input type="submit" value="Submit" class="wpcf7-form-control has-spinner wpcf7-submit"><span class="wpcf7-spinner"></span></p>
                                        <div class="wpcf7-response-output" id="contact-response" aria-hidden="true"></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <a href="{% url 'contact-us' %}"> Just a contact button </a>
        </div>
    </div>
</div>
<script>
    (function(){
        Pusher.logToConsole = true;
        var __pusher = new Pusher('f708c438921f9576fb82', {
          cluster: 'ap2'
        });
        __pusher.connection.bind( 'error', function( err ) {
            if( err.error.data.code === 4004 ) {
                log('Over limit!');
            }
        });
        window.__cta = (function(){ return {
            storage_key: "__pusher__cookie",
            channel: __pusher.channel('contact-us'),
            __init__: () => {
                if (window.localStorage) {
                    this._id = localStorage.getItem('__pusher__cookie');
                    if ( ! this._id ) {
                        this._id = (new Date().getTime())
                        localStorage.setItem('__pusher__cookie', this._id);
                    }
                } else {
                    this._id = (new Date().getTime()) ;
                }

                this.news_container = document.getElementById('triggered');
                __pusher.connection.subscribe('contact-us', function( states ) {
                  // states = {previous: 'oldState', current: 'newState'}
                  this.news_container.innerHTML = `${this.news_container.innerHTML} <p class="text-danger"> ${states.event} </p>`
                });
                console.log(' --> __init__(); ');
                window.__cta.load_hooks();
            },
            load_hooks: function() {
                console.log(' --> load_hooks(); ');
                $('.elementor-button-link').on('hover', this.cta_hovered);
                $('.elementor-button-link').on('click', this.cta_clicked);
                $('input[name="your-name"]').on('blur', this.contact_name__added);
                $('input[name="your-email"]').on('blur', this.contact_email__added);
                $('input[name="your-subject"]').on('blur', this.contact_subject__added);
                $('input[name="your-message"]').on('blur', this.contact_message__added);

            },
            cta_hovered: () => {
                console.log('cta_hovered');
                this.channel.trigger('cta_event', { message: 'Hello, world!', event: 'cta_hovered' })
            },
            cta_clicked: ()  => {
                console.log('cta_clicked');
                __pusher.channel.trigger('cta_event', {message: 'Hello, world!', event: "cta_clicked"});
            },
            contact_name__added: function(){
                this.channel.trigger('cta_event', {message: 'Hello, world!', event: "contact_name__added"});
            },
            contact_email__added: function() {
                this.channel.trigger('cta_event', {message: 'Hello, world!', event: "contact_email__added"});
            },
            contact_subject__added: function() {
                this.channel.trigger('contact_subject__added', {message: 'Hello, world!', event: "contact_subject__added"});
            },
            contact_message__added: function() {
                this.channel.trigger('cta_event', {message: 'Hello, world!', event: "contact_message__added"});
            },
            contact_submit: function() {
                this.channel.trigger('cta_event', {message: 'Hello, world!', event: "contact_submit"});
            },
            navigation: function() {
                this.channel.trigger('cta_event', {message: 'Hello, world!', event: "navigation"});
            }
        }
        /** pusher.disconnect(); */

        })();

        window.addEventListener('load', window.__cta.__init__)
        document.addEventListener('onbeforeunload', function() {
            pusher.disconnect();
        })
    })();

</script>
</body>
</html>
